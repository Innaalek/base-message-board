<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8"/>
<title>Base Message Board</title>
<script src="https://cdn.ethers.io/lib/ethers-6.7.0.umd.min.js"></script>
</head>
<body style="background:#0a0a0f;color:white;font-family:Arial;padding:20px">

<button onclick="connect()" style="width:100%;padding:12px;font-size:18px;border-radius:6px;cursor:pointer">
Connect MetaMask
</button>

<textarea id="msg" placeholder="Write something..." style="width:100%;margin-top:12px;padding:10px;border-radius:6px"></textarea>

<button onclick="send()" style="width:100%;margin-top:10px;padding:12px;font-size:18px;border-radius:6px;cursor:pointer">
Publish
</button>

<script>
let user;
const addr = "0x2E1476Ba7D284e931389710904569FFdd1eC10F1";
const abi = ["function postMessage(string _text) external"];

async function connect() {
  const a = await ethereum.request({method:"eth_requestAccounts"});
  user = a[0];
}

async function send() {
  if(!user) return alert("Connect wallet first");
  const s = await new ethers.BrowserProvider(ethereum).getSigner();
  const c = new ethers.Contract(addr, abi, s);
  const tx = await c.postMessage(document.getElementById("msg").value);
  await tx.wait();
  alert("Message sent on-chain!");
}
</script>

</body>
</html>
